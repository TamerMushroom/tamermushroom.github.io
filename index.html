<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NovaGuesser</title>
  <style>
    <div style="height: 2em;"></div>
    body {
      background: #0f0f0f;
      color: #e0e0e0;
      font-family: monospace;
      font-size: 1.5em;
    }
    #output {
      white-space: pre-wrap;
      margin-bottom: 1em;
    }
    input {
      font-family: monospace;
      width: 15ch;        /* wide enough for "A7" + comfort */
      font-size: 2.5em;  /* bigger text */
      padding: 0.25em 0.5em;
    }

    #day-image {
      display: block;      /* forces new line */
      margin-top: 1em;     /* space after text */
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body>

<pre id="output"></pre>

<img id="day-image" src="day1.png" alt="Day 1 image">

<pre id="post-image-output"></pre>

<input id="input" placeholder="A7" />
<button onclick="handleGuess()">Submit</button>

<script>
/* ===== CONSTANTS ===== */
const X = 1;
const Y = 1;
const ANSWER = "Saint Mary Bookstore";
const DAY = 1;

/* ===== GAME STATE ===== */
let gameOver = false;
let guesses = 0;
let points = [];

/* ===== OUTPUT HELPER ===== */
const output = document.getElementById("output");
function print(text = "") {
  output.textContent += text + "\n";
}

/* ===== INTRO ===== */
printLogo();
  
print("Welcome to NovaGuesser!");
print("(If you're on mobile the ASCII art looks a bit silly)\n");
print(`\nToday is Day ${DAY}`);

const postOutput = document.getElementById("post-image-output");

function printAfterImage(text = "") {
  postOutput.textContent += text + "\n";
}
printAfterImage("Type the coordinates of where you think the image was taken.\nThe closer you are, the more points you get!");
printAfterImage("Example format: A7\n");

const inputEl = document.getElementById("input");

inputEl.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    handleGuess();
  }
});

/* ===== GUESS HANDLER ===== */
function handleGuess() {
  if (gameOver) return;

  const input = document.getElementById("input");
  let coords = input.value.trim().toUpperCase();
  input.value = "";

  if (!/^[A-Z][0-9]$/.test(coords)) {
    printAfterImage("Invalid format. Example: A7");
    return;
  }

  guesses++;

  const score = guess(coords);
  points.push(score);
  if (score === 100) {
    printAfterImage(`Guess #${guesses}: 100 points — perfect!\n`);
    endGame();
    return;
  }

  printAfterImage(`${coords} Guess #${guesses}: ${score} points\n`);

  if (guesses >= 3) {
    endGame();
  }
}

/* ===== SCORING LOGIC (ported directly) ===== */
function guess(coords) {
  const guessX = coords.charCodeAt(0) - "A".charCodeAt(0) + 1;
  const guessY = parseInt(coords[1]);

  let distance = Math.sqrt(
    Math.pow(guessX - X, 2) + Math.pow(guessY - Y, 2)
  );

  distance = 2 * Math.pow(distance, 1.75);
  distance = 100 - Math.round(distance);

  if (distance < 0) distance = 0;
  if (distance === 100) gameOver = true;

  return distance;
}

/* ===== END GAME ===== */
function endGame() {
  gameOver = true;

  printAfterImage("\nThe picture was taken in " + ANSWER + ".\n");
  printAfterImage("NovaGuesser | Day " + DAY);
  printAfterImage("Guesses: " + guesses);

  points.forEach((p, i) => {
    printAfterImage(`Guess ${i + 1}: ${p}`);
  });

  printAfterImage("\nThanks for playing!");
  printAfterImage("Check back tomorrow for a new picture!\n");
  printAfterImage("\nCredits: \nAscii Art Generator - https://www.asciiart.eu\n\nI programed this game myself in Java, then used AI to make it a website.");
}

function printLogo() {
  print(`
        ▒▒▒▒▒▒▒▒          ░▒▒▒▒▒▒▒       
        ▒▒▒▒▒▒▒▒▒▒        ░▒▒▒▒▒▒▒       
        ▒▒▒▒▒▒▒▒▒▒▒░      ░▒▒▒▒▒▒▒          ██████████▓       
        ▒▒▒▒▒▒▒▒▒▒▒▒▒     ░▒▒▒▒▒▒▒       ░███         ███      ▒▒▒▒▒▒▒▒       ▒▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒▒▒▒▒▒             
        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒   ░▒▒▒▒▒▒▒      ██▒             ▓██     ▒▒▒▒▒▒▒░      ▒▒▒▒▒▒▒    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒          
        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒  ░▒▒▒▒▒▒▒     ██                 ██    ░▒▒▒▒▒▒▒     ▒▒▒▒▒▒▒    ▒▒▒▒▒▒▒▒▒  ░▒▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒    ██                   ██    ▒▒▒▒▒▒▒▒    ▒▒▒▒▒▒░                 ▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ██                   ██     ▒▒▒▒▒▒▒   ▒▒▒▒▒▒▒             ▒▒▒▒▒▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒  ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ██                   ██     ▒▒▒▒▒▒▒   ▒▒▒▒▒▒        ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒    ██                   ██      ▒▒▒▒▒▒▒ ▒▒▒▒▒▒       ▒▒▒▒▒▒▒▒▒    ▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒     ▒▒▒▒▒▒▒▒▒▒▒▒▒    ▒██                 ██░       ▒▒▒▒▒▒▒▒▒▒▒▒▒      ░▒▒▒▒▒▒▒      ▒▒▒▒▒▒▒▒         
        ▒▒▒▒▒▒▒▒       ▒▒▒▒▒▒▒▒▒▒▒     ███               ██▓         ▒▒▒▒▒▒▒▒▒▒▒       ▒▒▒▒▒▒▒▒     ▒▒▒▒▒▒▒▒▒░        
        ▒▒▒▒▒▒▒▒        ░▒▒▒▒▒▒▒▒▒       ███           ███           ▒▒▒▒▒▒▒▒▒▒         ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒       
        ▒▒▒▒▒▒▒▒          ▒▒▒▒▒▒▒▒       ███████▒░▓█████              ▒▒▒▒▒▒▒▒▒          ▒▒▒▒▒▒▒▒▒▒▒   ▒▒▒▒▒▒▒▒
                                       ▒█████                                                               
                                      ▓█████      ░▒▒▒▒▒░                                                             
                                     ██████     ▒▒▒▒   ▒▒                                                             
                                    █████▓     ░▒▒░                      ▒▒▒                     ▒▒▒                        
                                   █████▓      ▒▒▒   ▒▒▒▒▒▒ ░▒▒   ▒▒░  ▒▒   ▒░  ▒▒▒▒▒  ░▒▒▒▒░  ░▒   ▒▒  ▒▒▒▒▒▒        
                                  █████░       ░▒▒      ▒▒▒ ░▒▒   ▒▒░ ▒▒▒▒▒▒▒▒  ▒▒▒▒    ▒▒▒░  ░▒▒▒▒▒▒▒░ ▒▒▒           
                                 █████          ▒▒▒░   ▒▒▒  ░▒▒   ▒▒░ ▒▒           ▒▒▒    ░▒▒  ▒▒       ▒▒▒           
                                █████             ▒▒▒▒▒▒░    ▒▒▒▒▒▒▒   ░▒▒▒▒▒  ░▒▒▒▒▒  ▒▒▒▒▒▒   ▒▒▒▒▒░  ▒▒░           
  `);
}
</script>

</body>
</html>
